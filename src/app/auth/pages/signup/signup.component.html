<app-auth>
  <div class="signup">
    <div class="signup-top">
      <div class="signup-logo">
        <img src="assets/images/logo.png" alt="logo" />
        <h3>NoteJect</h3>
      </div>
      <div class="signup-body">
        <div class="signup-body-title">
          <h2>Hey, Hello ðŸ‘‹</h2>
          <p>Enter the information you entered while registering</p>
        </div>
        <div class="signup-body-form">
          <form
            [formGroup]="signupForm"
            (ngSubmit)="f.form.valid && signup()"
            #f="ngForm"
            *ngIf="!isSuccessful"
          >
            <div class="form-group">
              <label for="username">Username</label>
              <input
                nbInput
                fullWidth
                shape="semi-round"
                fieldSize="large"
                status="basic"
                type="text"
                id="username"
                formControlName="username"
                required
                class="form-control"
                [class.invalid]="
                  username?.invalid && (username?.dirty || username?.touched)
                "
              />
              <div
                *ngIf="
                  username?.invalid && (username?.dirty || username?.touched)
                "
                class="error-message"
              >
                <div *ngIf="username?.errors?.['required']">
                  Username is required
                </div>
                <div *ngIf="username?.errors?.['minlength']">
                  Username must be at least 3 characters
                </div>
                <div *ngIf="username?.errors?.['maxlength']">
                  Username must be at most 20 characters
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="email">Email</label>
              <input
                nbInput
                fullWidth
                shape="semi-round"
                fieldSize="large"
                status="basic"
                type="text"
                id="email"
                formControlName="email"
                required
                class="form-control"
                [class.invalid]="
                  email?.invalid && (email?.dirty || email?.touched)
                "
              />
              <div
                *ngIf="email?.invalid && (email?.dirty || email?.touched)"
                class="error-message"
              >
                <div *ngIf="email?.errors?.['required']">Email is required</div>
                <div *ngIf="email?.errors?.['maxlength']">
                  Email must be at most 50 characters
                </div>
                <div *ngIf="email?.errors?.['email']">
                  Email address is invalid
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="password">Password</label>
              <input
                nbInput
                fullWidth
                shape="semi-round"
                fieldSize="large"
                status="basic"
                type="password"
                id="password"
                formControlName="password"
                required
                class="form-control"
                [class.invalid]="
                  password?.invalid && (password?.dirty || password?.touched)
                "
              />
              <div
                *ngIf="
                  password?.invalid && (password?.dirty || password?.touched)
                "
                class="error-message"
              >
                <div *ngIf="password?.errors?.['required']">
                  Password is required
                </div>
                <div *ngIf="password?.errors?.['minlength']">
                  Password must be at least 6 characters
                </div>
                <div *ngIf="password?.errors?.['maxlength']">
                  Password must be at most 40 characters
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="confirmPassword">Confirm password</label>
              <input
                nbInput
                fullWidth
                shape="semi-round"
                fieldSize="large"
                status="basic"
                type="password"
                id="confirmPassword"
                formControlName="confirmPassword"
                required
                class="form-control"
                [class.invalid]="
                  confirmPassword?.invalid &&
                  (confirmPassword?.dirty || confirmPassword?.touched)
                "
              />
              <div
                *ngIf="
                  confirmPassword?.invalid &&
                  (confirmPassword?.dirty || confirmPassword?.touched)
                "
                class="error-message"
              >
                <div *ngIf="confirmPassword?.errors?.['required']">
                  Password is required
                </div>
                <div *ngIf="confirmPassword?.hasError('matching')">
                  Password must match
                </div>
              </div>
            </div>

            <div class="remember-forgot">
              <div class="remember">
                <nb-checkbox status="primary">Remember Me</nb-checkbox>
              </div>
              <div class="forgot">
                <a href="#">Forgot Password?</a>
              </div>
            </div>
            <button
              nbButton
              fullWidth
              size="large"
              shape="semi-round"
              type="submit"
              [disabled]="signupForm.invalid"
              class="btn"
            >
              Sign Up
            </button>

            <nb-alert
              class="alert"
              status="danger"
              *ngIf="f.submitted && isSignUpFailed"
            >
              Signup failed!<br />{{ errorMessage }}
            </nb-alert>
          </form>

          <nb-alert class="alert" status="success" *ngIf="isSuccessful">
            Your registration is successful!
          </nb-alert>
        </div>
      </div>
    </div>

    <div class="signup-footer">
      <p>Already have an account? <a routerLink="/login">Sign In</a></p>
    </div>
  </div>
</app-auth>
